<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE }}">
    {% load i18n staticfiles active_class bootstrap3 compress lang fontawesome %}
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="msapplication-TileColor" content="#00aba9">
        <meta name="msapplication-TileImage" content="{% static 'otakantaa/img/favicons/mstile-144x144.png' %}">
        <meta name="theme-color" content="#ffffff">

        {% block meta_extra %}{% endblock meta_extra %}

        <title>{% block title %}{% trans "Otakantaa.fi" %}{% if PRACTICE %} {% trans "harjoittelu" %}{% endif %}{% endblock title %}</title>

        <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700%7CPT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>

        <link rel="apple-touch-icon" sizes="57x57" href="{% static 'otakantaa/img/favicons/apple-touch-icon-57x57.png' %}">
        <link rel="apple-touch-icon" sizes="60x60" href="{% static 'otakantaa/img/favicons/apple-touch-icon-60x60.png' %}">
        <link rel="apple-touch-icon" sizes="72x72" href="{% static 'otakantaa/img/favicons/apple-touch-icon-72x72.png' %}">
        <link rel="apple-touch-icon" sizes="76x76" href="{% static 'otakantaa/img/favicons/apple-touch-icon-76x76.png' %}">
        <link rel="apple-touch-icon" sizes="114x114" href="{% static 'otakantaa/img/favicons/apple-touch-icon-114x114.png' %}">
        <link rel="apple-touch-icon" sizes="120x120" href="{% static 'otakantaa/img/favicons/apple-touch-icon-120x120.png' %}">
        <link rel="apple-touch-icon" sizes="144x144" href="{% static 'otakantaa/img/favicons/apple-touch-icon-144x144.png' %}">
        <link rel="apple-touch-icon" sizes="152x152" href="{% static 'otakantaa/img/favicons/apple-touch-icon-152x152.png' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'otakantaa/img/favicons/apple-touch-icon-180x180.png' %}">
        <link rel="icon" type="image/png" href="{% static 'otakantaa/img/favicons/favicon-32x32.png' %}" sizes="32x32">
        <link rel="icon" type="image/png" href="{% static 'otakantaa/img/favicons/favicon-194x194.png' %}" sizes="194x194">
        <link rel="icon" type="image/png" href="{% static 'otakantaa/img/favicons/favicon-96x96.png' %}" sizes="96x96">
        <link rel="icon" type="image/png" href="{% static 'otakantaa/img/favicons/android-chrome-192x192.png' %}" sizes="192x192">
        <link rel="icon" type="image/png" href="{% static 'otakantaa/img/favicons/favicon-16x16.png' %}" sizes="16x16">
        <link rel="manifest" href="{% static 'otakantaa/img/favicons/manifest.json' %}">
        <link rel="mask-icon" href="{% static 'otakantaa/img/favicons/safari-pinned-tab.svg' %}" color="#00abc8">

        {% block css %}

            {% compress css %}
                <link rel="stylesheet" href="{% static 'bower_components/bootstrap3-datetimepicker/build/css/bootstrap-datetimepicker.css' %}" type="text/css" charset="utf-8">
                <link rel="stylesheet" href="{% static "bower_components/select2/select2.css" %}" type="text/css">
                <link rel="stylesheet" href="{% static "bower_components/select2-bootstrap3-css/select2-bootstrap.css" %}" type="text/css">
                <link rel="stylesheet" href="{% static "multilingo/css/multilingo.css" %}" type="text/css">
                <link rel="stylesheet" href="{% static "redactor/css/redactor.css" %}" type="text/css">
                <link rel="stylesheet" href="{% static "formidable/css/formidableformset.css" %}" type="text/css">
            {% endcompress %}

            {% compress css %}
                <link rel="stylesheet" href="{% static "otakantaa/scss/otakantaa.scss" %}" type="text/x-scss">
            {% endcompress %}

        {% endblock css %}

        {% block js %}
            {% compress js %}
                <script type="text/javascript" src="{% static "bower_components/jquery/dist/jquery.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/underscore/underscore.js" %}"></script>
                <script type="text/javascript" src="{% static "otakantaa/js/jquery.csrf.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/bootstrap/dist/js/bootstrap.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/select2/select2.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/select2/select2_locale_sv.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/select2/select2_locale_fi.js" %}"></script>
                <script type="text/javascript" src="{% static "multilingo/js/jquery.multilingo.js" %}"></script>
                <script type="text/javascript" src="{% static "otakantaa/js/jquery.ajaxy.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/jquery-form/jquery.form.js" %}"></script>
                <script type="text/javascript" src="{% static "bower_components/babylon-grid/dist/jquery.babylongrid.min.js" %}"></script>
                <script type="text/javascript" src="{% static "otakantaa/js/jquery.buttonselect.js" %}"></script>
                <script type="text/javascript" src="{% static "okmoderation/js/jquery.modreasoning.js" %}"></script>

                <script type="text/javascript" src="{% static "redactor/redactor.js" %}"></script>
                <script type="text/javascript" src="{% static "redactor/langs/fi.js" %}"></script>
                <script type="text/javascript" src="{% static "redactor/langs/sv.js" %}"></script>
                <script type="text/javascript" src="{% static "otakantaa/js/redactor.options.js" %}"></script>

                <script type="text/javascript" src="{% static "formidable/js/jquery.formidableformset.js" %}"></script>

                <script src="{% static 'bower_components/moment/min/moment-with-locales.js' %}" type="text/javascript" charset="utf-8"></script>
                <script src="{% static 'bower_components/bootstrap3-datetimepicker/build/js/bootstrap-datetimepicker.min.js' %}" type="text/javascript" charset="utf-8"></script>
                <script src="{% static 'bower_components/jquery.expander/jquery.expander.js' %}"></script>
                <script src="{% static 'bower_components/jquery-goup/jquery.goup.min.js' %}"></script>

                <script type="text/javascript" src="{% static "otakantaa/js/goup.js" %}"></script>

            {% endcompress %}
        {% endblock js %}

        {% block js_extra %}
        {% endblock js_extra %}

        <script type="text/javascript">
            $(function () {

                setCsrfToken('{{ csrf_token }}');

                $.expander.defaults = $.extend({}, $.expander.defaults, {
                    expandText: '{% trans "Lue lisää" %}',
                    userCollapseText: '{% trans "Supista teksti" %}',
                    slicePoint: 200
                });

                $(document).on('click', '.toteuttamaton', function () {
                    window.alert("Toiminto toteuttamatta");
                });

                $(document).on('click', '.object-moderation-reasons .show-more', function (e) {
                    e.preventDefault();
                    $(this).parents('.object-moderation-reasons').first().addClass('show-all');
                });
            });
        </script>

        {% if GOOGLE_ANALYTICS_ID %}
            <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

              ga('create', '{{ GOOGLE_ANALYTICS_ID }}', 'auto');
              ga('send', 'pageview');
            </script>
        {% endif %}

        {% if PIWIK_ID %}
            <!-- Piwik -->
            <script type="text/javascript">
              var _paq = _paq || [];
              _paq.push(['trackPageView']);
              _paq.push(['enableLinkTracking']);
              (function() {
                var u="{{ PIWIK_URL }}";
                _paq.push(['setTrackerUrl', u+'piwik.php']);
                _paq.push(['setSiteId', {{ PIWIK_ID }}]);
                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
              })();
            </script>
            <noscript><p><img src="{{ PIWIK_URL }}piwik.php?idsite={{ PIWIK_ID }}" style="border:0;" alt="" /></p></noscript>
            <!-- End Piwik Code -->
        {% endif %}
    </head>

    <body>
        <a name="top"></a>

        <div class="sr-only">
            <a href="#maincontent">{% trans "Siirry sisältöön" %}</a>
        </div>

        <header id="global-header">

            {% include 'omnavi/header_nav.html' %}

            <nav class="navbar navbar-default navbar-otakantaa">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                            {% fa_icon "bars" alt=_("Avaa valikko") %}
                        </button>
                        <div class="navbar-logo hidden-xs hidden-sm">
                            <a class="navbar-brand" href="{% url 'schemes' %}"><img src="{% static 'otakantaa/img/logo_m_'|add:request.LANGUAGE_CODE|add:'.png' %}" alt="{% trans "Otakantaa.fi" %}-{% trans "logo" %}"></a>
                        </div>
                        <div class="navbar-logo hidden-md hidden-lg">
                            <a class="navbar-brand" href="{% url 'schemes' %}"><img src="{% static 'otakantaa/img/logo_s_'|add:request.LANGUAGE_CODE|add:'.png' %}" alt="{% trans "Otakantaa.fi" %}-{% trans "logo" %}"></a>
                        </div>
                        <div class="clearfix"></div>
                    </div>

                    <div class="collapse navbar-collapse" id="main-navbar-collapse">
                        <ul class="nav navbar-nav navbar-right navbar-links">
                            <li{% class_active_if_namespace 'content' 'participation' 'conversation' %}{% class_active_if_url 'schemes' %}>
                                <a class="primary-link" href="{% url 'schemes' %}">
                                    {% trans "Hankkeet" %}
                                </a> <span class="sr-only">|</span>
                            </li>
                            <li{% class_active_if_namespace 'help' %}>
                                <a href="{% url 'help:instruction_list' %}" class="primary-link">
                                    {% trans "Tietoa palvelusta" %}
                                </a>
                            </li>

                            {% if request.user.is_authenticated %}
                                <li{% class_active_if_namespace 'account' %}>
                                    <a class="dropdown-toggle navbar-profile-picture" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                        <div class="profile-pic-inline-block">
                                            {% include 'account/profile_picture.html' with small=True no_link=True user=request.user %}
                                        </div>
                                        {{ request.user }} <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="{% url 'account:profile' request.user.pk %}">{% trans "Oma sivu" %} <span class="msg-count">{{ request.user.unread_messages_count }}</span></a></li>
                                        <li role="separator" class="divider"></li>
                                        {% if perm.okadmin.CanAccessAdminPanel %}
                                            <li{% class_active_if_namespace 'okadmin' %}>
                                                <a href="{% url 'okadmin:moderation_queue' %}">{% trans "Hallinta" %}</a>
                                            </li>
                                            <li role="separator" class="divider"></li>
                                        {% endif %}

                                        <li><a id="logout-link" href="{% url 'account:logout' %}">{% trans "Kirjaudu ulos" %}</a></li>
                                    </ul>
                                    <noscript>
                                        <a href="{% url 'account:profile' request.user.pk %}">{% trans "Oma sivu" %}</a> |
                                        <a href="{% url 'account:logout' %}">{% trans "Kirjaudu ulos" %}</a>
                                    </noscript>
                                </li>
                            {% else %}
                                <li><a class="login-link btn btn-default" href="{% url 'account:login' %}">{% trans "Kirjaudu" %}</a></li>
                            {% endif %}

                            {% for code, lang in LANGUAGES %}
                                {% if code != LANGUAGE_CODE %}
                                    <li><a class="navbar-link navbar-right" hreflang="{{ code }}" href="{% lang_switch code %}">{{ lang }}</a></li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        {% block subnavi %}{% endblock subnavi %}
        {% block precontent %}{% endblock precontent %}

        <main id="maincontent" class="container">
            <a name="main"></a>
            {% bootstrap_messages %}
            {% block content %}{% endblock content %}
            <div class="push"></div>
        </main>

        <footer id="global-footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-1 text-center-sm footer-logo">
                        <img alt="{% trans "Leijonalogo" %}" src="{% static 'otakantaa/img/ok_leijona_60x81.png' %}">
                    </div>
                    <div class="col-md-4 text-center-sm">
                        <p>{% trans "Otakantaa.fi on oikeusministeriön ylläpitämä ja tuottama verkkopalvelu." %}</p>
                        <a href="{% url 'help:instruction_list' %}">{% trans "Lue lisää palvelusta" %}</a>
                    </div>
                    <div class="col-md-offset-4 col-md-3 footer-links">
                        <ul>
                            <li><a href="{% url 'organization:list' %}">{% trans "Organisaatiot" %}</a></li>
                            <li><a href="{% url 'help:linked_instruction_redirect' 'privacy-policy' %}">{% trans "Rekisteriseloste" %}</a></li>
                            <li><a href="{% url 'help:linked_instruction_redirect' 'contact-details' %}">{% trans "Yhteystiedot" %}</a></li>
                            <li><a href="{% url 'feedback' %}">{% trans "Palaute" %}</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

    </body>
</html>
